# Назначение скрипта
Скрипт github_analyzer.py предназначен для получения статистики о:

    1. самых активных участника разработки за период;
    2. pull request (запросах на включение кода) на указанном интеравале времени;
    3. issue (проблемах) на указанном интервале времени.

Данную информацию можно применять для решения следующих управленческих задач:

    1. поощрение активных разработчиков, уделение внимание неактивным разработчикам;
    2. выявление долго не одобряемых PR и уделение им особого внимания;
    3. выявление долго не устраняемых issue и уделение им особого внимания.

Исходя из назначения скрипта, имеет смысл запускать скрипт с частотой от 1 (для отслеживания динамики закрытия issue) до нескольких суток (спринт, минимальная итерация цикла разработки). Предположим, что требуется запускать скрипт раз в сутки. Реагировать на появление каждого отдельного issue или pull request не нужно.

Полученная статистика будет передавать в некоторую систему мониторинга. Для это желательно добавить возможность вывода статискики в файл стандартного формата. Для выдачи статистики сторонней системе можно использовать простой web-сервис с REST API.

Будем рассматривать этот скрипт как сервис (продукт), который нужно поддерживать в рабочем состоянии и регулярно обновлять. Предлагается следующий вариант реализации CI/CD для подобного сервиса.

# Workflow
## Простой workflow
Мы хотим, чтобы скрипт развёртывался без ручного одобрения. Релизы не создаём. Тестирование развёрнутого сервиса в тестовом окружении не делаем.

Каждый push в ветку issue/* вызывает линтинг и модульное тестирование. Если все тесты проходят, изменения сливаются в ветку master. В качестве тестового URL репозитория можно использовать репозиторий нашего же сервиса. Если слияние прошло успешно, прогоняются тесты на ветке master (кто-то ещё мог изменить код). Следующим шагом собирается Docker-образ и публикуется в Docker Hub. GitHub оповещает VPS с сервером развёртывания о готовности Docker-образа. Сервер развёртывания скачиват образ с Docker Hub, останавливает предыдущую версию контейнера и запускает новую.

Кодирование -> Тестирование -> Слияние -> Тестирование -> Сборка и публикация Docker-образа -> Развёртывание

## Более полный workflow
Кодирование -> Тестирование -> Слияние -> Тестирование -> Сборка и публикация Docker-образа -> Развёртывание в тестовое окружение -> Интеграционное тестирование -> Развёртывание в продакшн

# Компоненты системы
Для реализаци данного workflow понадобятся следующие компоненты:
    1. Рабочая станция разработчика
    2. GitHub
    3. Docker Registry (Docker Hub)
    4. VPS с внешним IP, содержащий
       1. Сервер развёртывания
       2. Целевой сервер, выполняющий скрипт github_analyzer.py

Автоматизация Workflow осуществляется с помощью GitHub Actions. Учётные данные для Docker-аккаунта хранятся в GitHub секретах.
